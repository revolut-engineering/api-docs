
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Revolut Open Banking API reference">
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MB5SHRL');</script>
    <!-- End Google Tag Manager -->
    <title>Revolut Open Banking API reference</title>
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono&amp;display=swap" rel="stylesheet" media="all" />
      <script src="../javascripts/all.js"></script>
  </head>

  <body class="build-banking-apps build-banking-apps_index" data-api-type="build-banking-apps" data-languages="[&quot;shell--sandbox&quot;,&quot;shell--production&quot;]">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MB5SHRL"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
    <header id="slate-doc-header"></header>

    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
        <ul class="toc-list-h2">
            <li>
              <a href="#introduction-to-the-open-banking-api" class="toc-h2 toc-link" data-title="introduction-to-the-open-banking-api">Introduction to the Open Banking API</a>
                <ul class="toc-list-h3">
                    <li>
                      <a href="#introduction-to-the-open-banking-api-developers-that-can-build-with-this-api" class="toc-h3 toc-link" data-title="developers-that-can-build-with-this-api">Developers that can build with this API</a>
                      <ul class="toc-list-h4">
                          <li>
                            <a href="#introduction-to-the-open-banking-api-introduction-to-the-open-banking-api-developers-that-can-build-with-this-api-psdii-regulated-third-party-providers" class="toc-h4 toc-link" data-title="psdii-regulated-third-party-providers">PSDII regulated Third Party Providers</a>
                          </li>
                          <li>
                            <a href="#introduction-to-the-open-banking-api-introduction-to-the-open-banking-api-developers-that-can-build-with-this-api-revolut-partners" class="toc-h4 toc-link" data-title="revolut-partners">Revolut Partners</a>
                          </li>
                      </ul>
                      </li>
                </ul>
            </li>
            <li>
              <a href="#get-started" class="toc-h2 toc-link" data-title="get-started">Get Started</a>
                <ul class="toc-list-h3">
                    <li>
                      <a href="#get-started-registering-an-application" class="toc-h3 toc-link" data-title="registering-an-application">Registering an application</a>
                      <ul class="toc-list-h4">
                          <li>
                            <a href="#get-started-get-started-registering-an-application-registering-using-developer-portal" class="toc-h4 toc-link" data-title="registering-using-developer-portal">Registering using Developer Portal</a>
                          </li>
                          <li>
                            <a href="#get-started-get-started-registering-an-application-registering-using-dcr" class="toc-h4 toc-link" data-title="registering-using-dcr">Registering using DCR</a>
                          </li>
                      </ul>
                      </li>
                    <li>
                      <a href="#get-started-receiving-sandbox-credentials" class="toc-h3 toc-link" data-title="receiving-sandbox-credentials">Receiving Sandbox credentials</a>
                      </li>
                    <li>
                      <a href="#get-started-creating-test-accounts" class="toc-h3 toc-link" data-title="creating-test-accounts">Creating test accounts</a>
                      </li>
                    <li>
                      <a href="#get-started-next-steps" class="toc-h3 toc-link" data-title="next-steps">Next steps</a>
                      </li>
                </ul>
            </li>
            <li>
              <a href="#identification-and-authentication" class="toc-h2 toc-link" data-title="identification-and-authentication">Identification and Authentication</a>
                <ul class="toc-list-h3">
                    <li>
                      <a href="#identification-and-authentication-get-started-next-steps-identification-using-your-valid-eidas-certificate" class="toc-h3 toc-link" data-title="identification-using-your-valid-eidas-certificate">Identification using your valid eIDAS certificate</a>
                      </li>
                    <li>
                      <a href="#identification-and-authentication-get-started-next-steps-identification-using-your-open-banking-certificates" class="toc-h3 toc-link" data-title="identification-using-your-open-banking-certificates">Identification using your Open Banking certificates</a>
                      </li>
                    <li>
                      <a href="#identification-and-authentication-dynamic-client-registration" class="toc-h3 toc-link" data-title="dynamic-client-registration">Dynamic Client Registration</a>
                      <ul class="toc-list-h4">
                          <li>
                            <a href="#identification-and-authentication-identification-and-authentication-dynamic-client-registration-registration-request" class="toc-h4 toc-link" data-title="registration-request">Registration request</a>
                          </li>
                          <li>
                            <a href="#identification-and-authentication-identification-and-authentication-dynamic-client-registration-jwks-file-format" class="toc-h4 toc-link" data-title="jwks-file-format">JWKs file format</a>
                          </li>
                          <li>
                            <a href="#identification-and-authentication-identification-and-authentication-dynamic-client-registration-certificate-dn-for-using-in-registration-request" class="toc-h4 toc-link" data-title="certificate-dn-for-using-in-registration-request">Certificate DN for using in registration request</a>
                          </li>
                          <li>
                            <a href="#identification-and-authentication-identification-and-authentication-dynamic-client-registration-updating-a-client" class="toc-h4 toc-link" data-title="updating-a-client">Updating a client</a>
                          </li>
                          <li>
                            <a href="#identification-and-authentication-identification-and-authentication-dynamic-client-registration-deleting-a-client" class="toc-h4 toc-link" data-title="deleting-a-client">Deleting a client</a>
                          </li>
                      </ul>
                      </li>
                    <li>
                      <a href="#identification-and-authentication-open-banking-security-profile" class="toc-h3 toc-link" data-title="open-banking-security-profile">Open Banking Security Profile</a>
                      </li>
                </ul>
            </li>
            <li>
              <a href="#tutorials" class="toc-h2 toc-link" data-title="tutorials">Tutorials</a>
                <ul class="toc-list-h3">
                    <li>
                      <a href="#tutorials-get-account-and-transaction-information" class="toc-h3 toc-link" data-title="get-account-and-transaction-information">Get account and transaction information</a>
                      <ul class="toc-list-h4">
                          <li>
                            <a href="#tutorials-tutorials-get-account-and-transaction-information-1-generating-client-credentials-token" class="toc-h4 toc-link" data-title="1-generating-client-credentials-token">1. Generating client credentials token</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-get-account-and-transaction-information-2-creating-consent" class="toc-h4 toc-link" data-title="2-creating-consent">2. Creating consent</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-get-account-and-transaction-information-3-create-a-jwt-url-parameter" class="toc-h4 toc-link" data-title="3-create-a-jwt-url-parameter">3. Create a JWT URL parameter</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-get-account-and-transaction-information-4-get-consent-from-user" class="toc-h4 toc-link" data-title="4-get-consent-from-user">4. Get consent from user</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-get-account-and-transaction-information-5-exchanging-request-token-for-access-token" class="toc-h4 toc-link" data-title="5-exchanging-request-token-for-access-token">5. Exchanging request token for access token</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-get-account-and-transaction-information-6-get-list-of-accounts" class="toc-h4 toc-link" data-title="6-get-list-of-accounts">6. Get list of Accounts</a>
                          </li>
                      </ul>
                      </li>
                    <li>
                      <a href="#tutorials-initiate-your-first-payment" class="toc-h3 toc-link" data-title="initiate-your-first-payment">Initiate your first payment</a>
                      <ul class="toc-list-h4">
                          <li>
                            <a href="#tutorials-tutorials-initiate-your-first-payment-1-generating-client-credentials-token" class="toc-h4 toc-link" data-title="1-generating-client-credentials-token">1. Generating client credentials token</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-initiate-your-first-payment-2-creating-a-domestic-payment-consent" class="toc-h4 toc-link" data-title="2-creating-a-domestic-payment-consent">2. Creating a domestic payment consent</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-initiate-your-first-payment-3-create-a-jwt-url-parameter" class="toc-h4 toc-link" data-title="3-create-a-jwt-url-parameter">3. Create a JWT URL parameter</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-initiate-your-first-payment-4-get-consent-from-user" class="toc-h4 toc-link" data-title="4-get-consent-from-user">4. Get consent from user</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-initiate-your-first-payment-5-exchanging-request-token-for-access-token" class="toc-h4 toc-link" data-title="5-exchanging-request-token-for-access-token">5. Exchanging request token for access token</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-initiate-your-first-payment-6-initiate-domestic-payment" class="toc-h4 toc-link" data-title="6-initiate-domestic-payment">6. Initiate domestic payment</a>
                          </li>
                      </ul>
                      </li>
                    <li>
                      <a href="#tutorials-create-your-first-draft-payment" class="toc-h3 toc-link" data-title="create-your-first-draft-payment">Create your first draft payment</a>
                      <ul class="toc-list-h4">
                          <li>
                            <a href="#tutorials-tutorials-create-your-first-draft-payment-1-get-authorisation-from-user" class="toc-h4 toc-link" data-title="1-get-authorisation-from-user">1. Get authorisation from user</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-create-your-first-draft-payment-2-exchanging-authorisation-code-for-access-token" class="toc-h4 toc-link" data-title="2-exchanging-authorisation-code-for-access-token">2. Exchanging authorisation code for access token</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-create-your-first-draft-payment-3-create-draft-payment" class="toc-h4 toc-link" data-title="3-create-draft-payment">3. Create Draft Payment</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-create-your-first-draft-payment-4-get-draft-payment" class="toc-h4 toc-link" data-title="4-get-draft-payment">4. Get Draft Payment</a>
                          </li>
                          <li>
                            <a href="#tutorials-tutorials-create-your-first-draft-payment-5-working-with-draft-payments" class="toc-h4 toc-link" data-title="5-working-with-draft-payments">5. Working with Draft Payments</a>
                          </li>
                      </ul>
                      </li>
                </ul>
            </li>
            <li>
              <a href="#api-metrics" class="toc-h2 toc-link" data-title="api-metrics">API Metrics</a>
            </li>
            <li>
              <a href="#usage-and-limits" class="toc-h2 toc-link" data-title="usage-and-limits">Usage and limits</a>
            </li>
            <li>
              <a href="#glossary" class="toc-h2 toc-link" data-title="glossary">Glossary</a>
            </li>
            <li>
              <a href="#errors" class="toc-h2 toc-link" data-title="errors">Errors</a>
            </li>
        </ul>
      </div>
        <ul class="toc-footer">
            <li><a href='https://business.revolut.com/signup'>Sign up for Revolut Business</a></li>
            <li><br/>Copyright © 2020 Revolut Ltd</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h2 id='introduction-to-the-open-banking-api'><a href='#introduction-to-the-open-banking-api' class='header-link'><i></i></a>Introduction to the Open Banking API</h2>
<p>The Open Banking API is the gateway for third-parties to interact with Revolut customers and products.</p>

<p>Whether you are a regulated third-party provider or are looking to seamlessly integrate Revolut functionality into your own application, this documentation is the place to start. </p>

<table><thead>
<tr>
<th>API</th>
<th>For Who</th>
<th>What can you do</th>
</tr>
</thead><tbody>
<tr>
<td>Open Banking API</td>
<td>Third Party Developers</td>
<td>Create applications for the Marketplace or integrate Revolut into your own app for Revolut customers.</td>
</tr>
</tbody></table>

<p><span class="subtext">You might be looking for the <a href="https://developer.revolut.com/docs/manage-accounts">Business API</a> or the <a href="https://developer.revolut.com/accept-payments">Merchant API</a></span></p>
<h5 id='introduction-to-the-open-banking-api-useful-links'><a href='#introduction-to-the-open-banking-api-useful-links' class='header-link'><i></i></a>Useful Links</h5>
<ul>
<li><a href="https://developer.revolut.com/api-reference/open-banking/">Open Banking API Reference</a> </li>
<li><a href="https://developer.revolut.com/portal/signin">Developer Portal</a></li>
</ul>
<h3 id='introduction-to-the-open-banking-api-developers-that-can-build-with-this-api'><a href='#introduction-to-the-open-banking-api-developers-that-can-build-with-this-api' class='header-link'><i></i></a>Developers that can build with this API</h3><h4 id='introduction-to-the-open-banking-api-introduction-to-the-open-banking-api-developers-that-can-build-with-this-api-psdii-regulated-third-party-providers'><a href='#introduction-to-the-open-banking-api-introduction-to-the-open-banking-api-developers-that-can-build-with-this-api-psdii-regulated-third-party-providers' class='header-link'><i></i></a>PSDII regulated Third Party Providers</h4>
<p>Third Party Providers (TPPs) are authorised online service providers that have been introduced as part of Open Banking. If you are engaged in the provision of the payment initiation or account information servives in the European Union (EU) or the United Kingdom (UK), you will have to be regulated by financial regulatory bodies in the relevant jurisdictions. In order to get access to our Open Banking API you will need to use a valid eIDAS certificate or Open Banking (OBIE) certificate to register your application on production.</p>

<aside class="notice">
eIDAS certificates are issued by Qualified Trust Service Providers (QTSPs) that are in the <a href="https://webgate.ec.europa.eu/tl-browser/#/search/type/1">European List of Trusted Lists</a>. Just check the QWAC and QCSEAL, choose your country, and get the list. 
</aside>
<h4 id='introduction-to-the-open-banking-api-introduction-to-the-open-banking-api-developers-that-can-build-with-this-api-revolut-partners'><a href='#introduction-to-the-open-banking-api-introduction-to-the-open-banking-api-developers-that-can-build-with-this-api-revolut-partners' class='header-link'><i></i></a>Revolut Partners</h4>
<p>For businesses that are not regulated under PSDII and would like to get access to our APIs - you can <a href="https://docs.google.com/forms/d/1jTvhtnCvPvVviGxAqu03vVrnfcrhzkU6KhbAuQvUuQE/viewform?edit_requested=true">reach out</a> to see if you qualify for access to our endpoints.</p>

<aside class="notice">
Note: please ensure you seek your own legal advice to understand if you need to be regulated to access financial data surfaced by Revolut's APIs. 
</aside>
<h2 id='get-started'><a href='#get-started' class='header-link'><i></i></a>Get Started</h2>
<p>The quickest way to get up and running with the Open Banking API.</p>
<h3 id='get-started-registering-an-application'><a href='#get-started-registering-an-application' class='header-link'><i></i></a>Registering an application</h3>
<p>The first step before you can start using our APIs is to register your application. </p>
<h4 id='get-started-get-started-registering-an-application-registering-using-developer-portal'><a href='#get-started-get-started-registering-an-application-registering-using-developer-portal' class='header-link'><i></i></a>Registering using Developer Portal</h4>
<p>This is the recommended and fastest way to get your application registered.</p>

<p><a href='https://developer.revolut.com/portal/signup' role="button" class="cta-button"> Sign up for a Developer Account </a></p>

<p>If you are in possession of an OBIE/eIDAS certificate, you can upload the certificate in the portal and register a production application without any further approval from Revolut. You will be returned a <code>client_id</code> which will be used for making requests to any of our APIs. </p>

<p>If you are looking to become a Revolut Partner, you must submit a request for your application to be approved via the portal. On successful approval of your application, we will issue you with production certificates that can be used on our APIs.</p>
<h4 id='get-started-get-started-registering-an-application-registering-using-dcr'><a href='#get-started-get-started-registering-an-application-registering-using-dcr' class='header-link'><i></i></a>Registering using DCR</h4><blockquote>
      <div><p>JWT Header</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-kid"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS256"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><blockquote>
      <div><p>JWT Payload</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-iss"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1591352490</span><span class="p">,</span><span class="w">
  </span><span class="s2">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1591356090</span><span class="p">,</span><span class="w">
  </span><span class="s2">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://revolut.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"openid"</span><span class="p">,</span><span class="w"> </span><span class="s2">"payments"</span><span class="p">,</span><span class="w"> </span><span class="s2">"accounts"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fundsconfirmations"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"redirect_uris"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http://url/one"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"token_endpoint_auth_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tls_client_auth"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"application_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_token_signed_response_alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS256"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request_object_signing_alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS256"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tls_client_auth_dn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-dn"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"software_statement"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ewogICJhbGciOiAibm9uZSIKfQ.ewogICJvcmdfaWQiOiAiNzc3NTgwMDAwMTAzVUF2QUFNIiwKICAib3JnX25hbWUiOiAiUmV2b2x1dCBUUFAiLAogICJzb2Z0d2FyZV9jbGllbnRfbmFtZSI6ICJSZXZvbHV0IFRQUCIsCiAgIm9yZ19qd2tzX2VuZHBvaW50IjogImh0dHA6Ly9vcGVuYmFua2luZy5vcmcudWsvZW5kcG9pbnQiLAogICJzb2Z0d2FyZV9yZWRpcmVjdF91cmlzIjogWwogICAgImh0dHA6Ly91cmwvb25lIgogIF0KfQ."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><blockquote>
      <div><p>Register client</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -X POST https://sandbox-oba.revolut.com/register <span class="se">\</span>
--header <span class="s1">'Content-Type: application/jwt'</span> <span class="se">\</span>
--data-raw <span class="s1">'&lt;insert JWT&gt;'</span>
</code></pre><pre class="highlight shell tab-shell--production"><code>curl -X POST https://oba.revolut.com/register <span class="se">\</span>
--header <span class="s1">'Content-Type: application/jwt'</span> <span class="se">\ </span>
--data-raw <span class="s1">'&lt;insert JWT&gt;'</span>
</code></pre>
<p>The alternative registration method is to register an application using our <code>/register</code> endpoint (Dynamic Client Registration). </p>

<p>First, create a JWT with the details relevant to your application. This should be signed with your signing certificate&#39;s private key. Please see on the right hand side examples of a JWT Header and Payload.</p>

<p>Once you have a valid JWT, use the <code>/register</code> endpoint to dynamically register your application. In the response you will obtain your <code>client_id</code>.</p>

<p><strong>Note:</strong> to check that your JWT is valid, please use this <a href="https://jwt.io/#debugger-io"> JWT debugging tool </a> before attempting to register.</p>

<p><strong>Note:</strong> for full detail on generating the <code>software_statement</code> and <code>tls_client_auth_dn</code> fields, please read the <a href="#identification-and-authentication-identification-and-authentication-dynamic-client-registration-registration-request"> Identification and Authentication</a> section of our documentation.</p>

<p><strong>Open ID Configuration URLs</strong></p>

<p>We use OpenID Connect: please ensure to include <code>openid</code> scope in your JWT payload. For more detail, please see configurations for Production and  Sandbox environments:</p>

<ul>
<li>Production: <a href="https://oba.revolut.com/openid-configuration"> https://oba.revolut.com/openid-configuration</a></li>
<li>Sandbox: <a href="https://sandbox-oba.revolut.com/openid-configuration"> https://sandbox-oba.revolut.com/openid-configuration</a></li>
</ul>
<h3 id='get-started-receiving-sandbox-credentials'><a href='#get-started-receiving-sandbox-credentials' class='header-link'><i></i></a>Receiving Sandbox credentials</h3><blockquote>
      <div><p>Generate RSA</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell"><code>openssl genrsa -out server.key 2048
</code></pre><blockquote>
      <div><p>Generate CSR</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell"><code>openssl req -sha256 -new -key server.key -out server.csr -outform der
</code></pre>
<p>To receive credentials that can be used in our Sandbox environment, first generate a private RSA key and CSR.</p>

<p>Upload this CSR in our <a href='https://developer.revolut.com/portal/applications'>Developer Portal </a> and you will be able to download credentials that work in the Sandbox environment. </p>
<h3 id='get-started-creating-test-accounts'><a href='#get-started-creating-test-accounts' class='header-link'><i></i></a>Creating test accounts</h3>
<p>On top of your Sandbox credentials, you will also need test accounts which can be used to test your application.
It is possible to create both Retail and Business test accounts:</p>

<ul>
<li><p>Create a Business test account from our dedicated environment<a href='https://sandbox-business.revolut.com/?utm_source=Open%20Banking%20API&utm_medium=docs&utm_campaign=documentation'> here</a>.</p></li>
<li><p>Create a Personal test account directly from the <a href='https://developer.revolut.com/portal/applications'> Developer Portal</a>.</p></li>
</ul>
<h3 id='get-started-next-steps'><a href='#get-started-next-steps' class='header-link'><i></i></a>Next steps</h3>
<p>Now that you have your application registered, you are ready to start requesting user consents and make API calls to our various endpoints!</p>

<p>Please see our set of step by step <a href="#tutorials"> tutorials</a> to guide you through.</p>
<h2 id='identification-and-authentication'><a href='#identification-and-authentication' class='header-link'><i></i></a>Identification and Authentication</h2><h4 id='identification-and-authentication-get-started-next-steps-identification-using-your-valid-eidas-certificate'><a href='#identification-and-authentication-get-started-next-steps-identification-using-your-valid-eidas-certificate' class='header-link'><i></i></a>Identification using your valid eIDAS certificate</h4>
<p>For businesses that are a regulated third party provider (TPP) in one of the European Union (EU) member states, it is possible to use valid eIDAS QWAC certificates from any trusted QTSPs listed at <a href="https://webgate.ec.europa.eu/tl-browser/#/">https://webgate.ec.europa.eu/tl-browser/#/</a> to register your application/client.
If you have any issues onboarding with eIDAS, please <a href="mailto:api-requests@revolut.com">contact us</a> and we will try to help.</p>
<h4 id='identification-and-authentication-get-started-next-steps-identification-using-your-open-banking-certificates'><a href='#identification-and-authentication-get-started-next-steps-identification-using-your-open-banking-certificates' class='header-link'><i></i></a>Identification using your Open Banking certificates</h4>
<p>If you have enrolled as a third party provider (TPP) on the UK open banking directory using your eIDAS certificate, you can then access our API using the following OBIE certificates: OBWAC (Open Banking QWAC-like certificates), OBSEAL (Open Banking QSEAL-like certificates) and OBIE non-eIDAS like certificates for transport and signing. OBIE certificates can be used to connect to customers of Revolut Ltd (UK).</p>

<p>In order to delete an Application you may use the DELETE registration endpoint. The DELETE endpoint is implemented as it is described in the official <a href="https://openbanking.atlassian.net/wiki/spaces/DZ/pages/937066600/Dynamic+Client+Registration+-+v3.1#DynamicClientRegistration-v3.1-DELETE/register/{ClientId}">documentation</a>.</p>
<h3 id='identification-and-authentication-dynamic-client-registration'><a href='#identification-and-authentication-dynamic-client-registration' class='header-link'><i></i></a>Dynamic Client Registration</h3><blockquote>
      <div><p>Register client</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -X POST https://sandbox-oba.revolut.com/register
</code></pre><pre class="highlight shell tab-shell--production"><code>curl -X POST https://oba.revolut.com/register

</code></pre>
<p>In order to create an Application you will need to use Dynamic Registration.</p>

<p>The register endpoint is implemented as it is described in the official <a href="https://openbanking.atlassian.net/wiki/spaces/DZ/pages/937066600/Dynamic+Client+Registration+-+v3.1#DynamicClientRegistration-v3.1-POST/register">documentation</a>.</p>
<h4 id='identification-and-authentication-identification-and-authentication-dynamic-client-registration-registration-request'><a href='#identification-and-authentication-identification-and-authentication-dynamic-client-registration-registration-request' class='header-link'><i></i></a>Registration request</h4>
<p>Registration request should satisfy the following format:</p>
<blockquote>
      <div><p>Example JWT header</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-kid"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS256"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>JWT Header</th>
<th>Format</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>kid</td>
<td>String</td>
<td>key ID of a public key from JWKs file</td>
<td>Yes</td>
</tr>
<tr>
<td>alg</td>
<td>String</td>
<td>signing algorithm, currently only PS256 is supported</td>
<td>Yes</td>
</tr>
</tbody></table>
<blockquote>
      <div><p>Example JWT payload</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-iss"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1591352490</span><span class="p">,</span><span class="w">
  </span><span class="s2">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1591356090</span><span class="p">,</span><span class="w">
  </span><span class="s2">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://revolut.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"openid"</span><span class="p">,</span><span class="w"> </span><span class="s2">"payments"</span><span class="p">,</span><span class="w"> </span><span class="s2">"accounts"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fundsconfirmations"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"redirect_uris"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http://url/one"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"token_endpoint_auth_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tls_client_auth"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"application_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_token_signed_response_alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS256"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request_object_signing_alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS256"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tls_client_auth_dn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-dn"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"software_statement"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ewogICJhbGciOiAibm9uZSIKfQ.ewogICJvcmdfaWQiOiAiNzc3NTgwMDAwMTAzVUF2QUFNIiwKICAib3JnX25hbWUiOiAiUmV2b2x1dCBUUFAiLAogICJzb2Z0d2FyZV9jbGllbnRfbmFtZSI6ICJSZXZvbHV0IFRQUCIsCiAgIm9yZ19qd2tzX2VuZHBvaW50IjogImh0dHA6Ly9vcGVuYmFua2luZy5vcmcudWsvZW5kcG9pbnQiLAogICJzb2Z0d2FyZV9yZWRpcmVjdF91cmlzIjogWwogICAgImh0dHA6Ly91cmwvb25lIgogIF0KfQ."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>NOTE:</strong> You will need a valid JWT signature to register your client. You can debug your JWT header and payload using the <a href="https://jwt.io/#debugger-io"> debug tool.</a></p>

<table><thead>
<tr>
<th>JWT payload</th>
<th>Format</th>
<th>Description</th>
<th>REQUIRED</th>
</tr>
</thead><tbody>
<tr>
<td>iss</td>
<td>String</td>
<td>identifies the principal that issued the JWT</td>
<td>Yes</td>
</tr>
<tr>
<td>iat</td>
<td>Numeric</td>
<td>identifies the time at which the JWT was issued</td>
<td>Yes</td>
</tr>
<tr>
<td>exp</td>
<td>Numeric</td>
<td>JWT expiration time</td>
<td>Yes</td>
</tr>
<tr>
<td>aud</td>
<td>String</td>
<td>identifies the recipients that the JWT is intended for</td>
<td>Yes</td>
</tr>
<tr>
<td>scope</td>
<td>String[]</td>
<td>list of scopes, supported scopes are <code>openid</code> (required), <code>accounts</code>, <code>payments</code>, <code>fundsconfirmations</code></td>
<td>Yes</td>
</tr>
<tr>
<td>redirect_uris</td>
<td>String[]</td>
<td>list of allowed redirect URLs</td>
<td>Yes</td>
</tr>
<tr>
<td>token_endpoint_auth_method</td>
<td>String</td>
<td>currently only <code>tls_client_auth</code> is supported</td>
<td>Yes</td>
</tr>
<tr>
<td>application_type</td>
<td>String</td>
<td>application type</td>
<td>Yes</td>
</tr>
<tr>
<td>id_token_signed_response_alg</td>
<td>String</td>
<td>signing algorithm, currently only <code>PS256</code> is supported</td>
<td>Yes</td>
</tr>
<tr>
<td>request_object_signing_alg</td>
<td>String</td>
<td>signing algorithm, currently only <code>PS256</code> is supported</td>
<td>Yes</td>
</tr>
<tr>
<td>tls_client_auth_dn</td>
<td>String</td>
<td>claim <em>MUST</em> contain the DN of the certificate that the TPP will use, how to obtain the DN of your certificate is described in next paragraph</td>
<td>Yes</td>
</tr>
<tr>
<td>software_statement</td>
<td>String</td>
<td>software statement assertion issued by the issuer in JWT format</td>
<td>Yes</td>
</tr>
</tbody></table>
<h5 id='identification-and-authentication-identification-and-authentication-dynamic-client-registration-identification-and-authentication-identification-and-authentication-dynamic-client-registration-registration-request-open-banking-software-statement'><a href='#identification-and-authentication-identification-and-authentication-dynamic-client-registration-identification-and-authentication-identification-and-authentication-dynamic-client-registration-registration-request-open-banking-software-statement' class='header-link'><i></i></a>Open Banking software statement</h5>
<p>If you are registering with Open Banking certificate, you should use the software statement signed by Open Banking which you can obtain from Directory</p>
<h5 id='identification-and-authentication-identification-and-authentication-dynamic-client-registration-identification-and-authentication-identification-and-authentication-dynamic-client-registration-registration-request-self-signed-software-statement'><a href='#identification-and-authentication-identification-and-authentication-dynamic-client-registration-identification-and-authentication-identification-and-authentication-dynamic-client-registration-registration-request-self-signed-software-statement' class='header-link'><i></i></a>Self-signed software statement</h5>
<p>In order to directly register with eIDAS certificate, it’s possible to use a self-signed software statement. In such case software statement should satisfy the following format:</p>
<blockquote>
      <div><p>Example self-signed software statement header</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>SSA header claim</th>
<th>Description</th>
<th>Required</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>alg</td>
<td><code>none</code> value has to be used to indicate self-signed software statement</td>
<td>Yes</td>
<td>String</td>
</tr>
</tbody></table>
<blockquote>
      <div><p>Example self-signed software statement payload</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"org_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Revolut TPP"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"software_client_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Revolut TPP"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"org_jwks_endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://openbanking.org.uk/endpoint"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"software_redirect_uris"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http://url/one"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>SSA payload claim</th>
<th>Description</th>
<th>Required</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>org_jwks_endpoint</td>
<td>a JWKs endpoint, this endpoint has to contain a signing key (QSealC) matching with a <code>kid</code> provided in JWT header of the registration request</td>
<td>Yes</td>
<td>URL</td>
</tr>
<tr>
<td>org_name</td>
<td>a name of a software (shown in the UI), alternatively <code>software_client_name</code> can be used</td>
<td>Yes</td>
<td>String</td>
</tr>
<tr>
<td>software_client_name</td>
<td>a name of a software (shown in the UI)</td>
<td>Yes</td>
<td>String</td>
</tr>
<tr>
<td>software_redirect_uris</td>
<td>a list of allowed redirect URLs, has to contain all redirect URLs from JWT <code>redirect_uris</code> claim</td>
<td>Yes</td>
<td>URL[]</td>
</tr>
</tbody></table>

<p>Signature of self-signed software statement should be an empty string.</p>
<h4 id='identification-and-authentication-identification-and-authentication-dynamic-client-registration-jwks-file-format'><a href='#identification-and-authentication-identification-and-authentication-dynamic-client-registration-jwks-file-format' class='header-link'><i></i></a>JWKs file format</h4>
<p>JWKs (JWK Set) is a JSON data structure that represents a set of JWKs. A JSON Web Key (JWK) is a (JSON) data structure that represents a cryptographic key. Mandatory JWK parameters are described below.</p>

<table><thead>
<tr>
<th>JWK mandatory fields</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kid</td>
<td>(Key ID) is used to match a specific key</td>
</tr>
<tr>
<td>kty</td>
<td>Identifies the cryptographic algorithm family used with the key</td>
</tr>
<tr>
<td>e</td>
<td>Contains the exponent value for the RSA public key, represented as a Base64urlUInt-encoded value</td>
</tr>
<tr>
<td>n</td>
<td>Contains the modulus value for the RSA public key, represented as a Base64urlUInt-encoded value</td>
</tr>
<tr>
<td>use</td>
<td>Identifies the intended use of the public key (should always be set to <code>sig</code>)</td>
</tr>
<tr>
<td>x5c</td>
<td>Equivalent to your signing key in <code>.pem</code> format.</td>
</tr>
</tbody></table>

<div class="feedback"></div>
<h4 id='identification-and-authentication-identification-and-authentication-dynamic-client-registration-certificate-dn-for-using-in-registration-request'><a href='#identification-and-authentication-identification-and-authentication-dynamic-client-registration-certificate-dn-for-using-in-registration-request' class='header-link'><i></i></a>Certificate DN for using in registration request</h4><blockquote>
      <div><p>certificates in DER format:</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell"><code>openssl x509 -in /path/to/your/cert.der -inform der -noout -subject -nameopt RFC2253
</code></pre><blockquote>
      <div><p>Certificates in PEM format:</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell"><code>openssl x509 -in /path/to/your/cert.pem -inform pem -noout -subject -nameopt RFC2253
</code></pre>
<aside class="warning">
    Please note that Dynamic Registration requires using the RFC2253 DN format in <b>tls_client_auth_dn</b> field of your request.
</aside>

<p>Use the commands to the right to obtain the DN from your certificates in either DER or PEM formats.</p>

<div class="feedback"></div>
<h4 id='identification-and-authentication-identification-and-authentication-dynamic-client-registration-updating-a-client'><a href='#identification-and-authentication-identification-and-authentication-dynamic-client-registration-updating-a-client' class='header-link'><i></i></a>Updating a client</h4><blockquote>
      <div><p>Update a Client</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -X PUT https://sandbox-oba.revolut.com/register/17b2738f-26b1-46f9-a979-debbf1f39365
</code></pre><pre class="highlight shell tab-shell--production"><code>curl -X PUT https://oba.revolut.com/register/17b2738f-26b1-46f9-a979-debbf1f39365
</code></pre>
<p>Making a <code>PUT</code> request to the <code>register</code> endpoint allows you to update certain info for an existing client. You&#39;ll need to provide the <code>Client ID</code> as a parameter to repersent which client you want to update along with the access token in the request header. In the body you can pass the updated JWT for the specified client. For simplicity, you can use the same JWT you created for the registration request but with the updated fields as any additional fields will be ignored.</p>
<h5 id='identification-and-authentication-identification-and-authentication-dynamic-client-registration-identification-and-authentication-identification-and-authentication-dynamic-client-registration-updating-a-client-fields-for-updating-client'><a href='#identification-and-authentication-identification-and-authentication-dynamic-client-registration-identification-and-authentication-identification-and-authentication-dynamic-client-registration-updating-a-client-fields-for-updating-client' class='header-link'><i></i></a>Fields for updating client</h5>
<table><thead>
<tr>
<th>Client Property</th>
<th>Corresponding JWT field</th>
</tr>
</thead><tbody>
<tr>
<td>Application name</td>
<td><code>org_name</code> or <code>software_client_name</code> in respect to which field is present in the SSA</td>
</tr>
<tr>
<td>Redirect URIs</td>
<td><code>redirect_uris</code> field in the SSA</td>
</tr>
<tr>
<td>JWKs URL</td>
<td><code>org_jwks_endpoint</code> field in the SSA</td>
</tr>
<tr>
<td>Distinguished name</td>
<td><code>tls_client_auth_dn</code> field in the JWT payload</td>
</tr>
</tbody></table>
<h4 id='identification-and-authentication-identification-and-authentication-dynamic-client-registration-deleting-a-client'><a href='#identification-and-authentication-identification-and-authentication-dynamic-client-registration-deleting-a-client' class='header-link'><i></i></a>Deleting a client</h4><blockquote>
      <div><p>Delete a Client</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -X DELETE https://sandbox-oba.revolut.com/register/17b2738f-26b1-46f9-a979-debbf1f39365
--header <span class="s1">'Authorisation: Bearer &lt;your token&gt;'</span>
</code></pre><pre class="highlight shell tab-shell--production"><code>curl -X DELETE https://oba.revolut.com/register/17b2738f-26b1-46f9-a979-debbf1f39365
--header <span class="s1">'Authorisation: Bearer &lt;your token&gt;'</span>
</code></pre>
<p>Making a <code>DELETE</code> request to the <code>register</code> endpoint allows you to request deletion of an existing client.
You need to provide the <code>Client ID</code> and access token to make a succesful request.
On a successful request, you&#39;ll recieve a JSON payload that matched the <code>Client ID</code> of the client that client-credentials grant access token was issued.
In the case that the <code>Client Id</code> is unknown, you will recieve a JSON payload with an <code>Unauthorized</code> status code.</p>

<p>In the case that you&#39;re having issues deleting a client, don&#39;t hesitate to reach out to <a href="mailto:api-requests@revolut.com">support</a>.</p>
<h3 id='identification-and-authentication-open-banking-security-profile'><a href='#identification-and-authentication-open-banking-security-profile' class='header-link'><i></i></a>Open Banking Security Profile</h3>
<p>We use OpenID Connect (OIDC) as a way to verify a client&#39;s identity. For OIDC, the open banking security profile must exist where you as the TPP is certified so we can correctly identify each participant. Only after you have certification can you use these endpoints -- unless explicitly stated. If you&#39;re interested in learning more about the Open Banking security profile, you can see the implementers draft on the <a href="https://openbanking.atlassian.net/wiki/spaces/DZ/pages/83919096/Open+Banking+Security+Profile+-+Implementer+s+Draft+v1.1.2"> official documentation</a>.</p>
<h5 id='identification-and-authentication-identification-and-authentication-open-banking-security-profile-identification-and-authentication-identification-and-authentication-dynamic-client-registration-deleting-a-client-authorisation-endpoint'><a href='#identification-and-authentication-identification-and-authentication-open-banking-security-profile-identification-and-authentication-identification-and-authentication-dynamic-client-registration-deleting-a-client-authorisation-endpoint' class='header-link'><i></i></a>Authorisation Endpoint</h5><blockquote>
      <div><p>Authorize consent</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>https://sandbox-oba.revolut.com/ui/index.html
</code></pre><pre class="highlight shell tab-shell--production"><code>https://oba.revolut.com/ui/index.html
</code></pre>
<p>The authorisation flow redirects the user to the revolut login screen, where they can securely enter their credentials. 
As you continue to explore the API, you will also see how users are redirected to give consent for their accounts in a similar fashion.</p>
<h5 id='identification-and-authentication-identification-and-authentication-open-banking-security-profile-identification-and-authentication-identification-and-authentication-dynamic-client-registration-deleting-a-client-token-endpoint'><a href='#identification-and-authentication-identification-and-authentication-open-banking-security-profile-identification-and-authentication-identification-and-authentication-dynamic-client-registration-deleting-a-client-token-endpoint' class='header-link'><i></i></a>Token Endpoint</h5>
<p>As with the any typical OAuth 2.0 flow, there is the need to have an access token which you will need to supplement with each request. <a href="https://openbanking.atlassian.net/wiki/spaces/DZ/pages/83919096/Open+Banking+Security+Profile+-+Implementer+s+Draft+v1.1.2">Open Banking specification</a> for more information about the semantics of this API.</p>
<blockquote>
      <div><p>Get access token</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -X POST https://sandbox-oba-auth.revolut.com/token
</code></pre><pre class="highlight shell tab-shell--production"><code>curl -X POST https://oba-auth.revolut.com/token
</code></pre>
<p><code>/token</code> endpoint served via Revolut authorisation server. This endpoint requires client certificate authentication for MTLS.</p>

<div class="feedback"></div>
<h2 id='tutorials'><a href='#tutorials' class='header-link'><i></i></a>Tutorials</h2><h3 id='tutorials-get-account-and-transaction-information'><a href='#tutorials-get-account-and-transaction-information' class='header-link'><i></i></a>Get account and transaction information</h3>
<p>This tutorial will get you started with pulling account and transaction information out of Revolut. </p>

<p>In this example, you will be pulling data from the <code>/accounts</code> endpoint but the principles used apply to all of our Accounts and Transactions endpoints. See the <a href="https://developer.revolut.com/api-reference/open-banking/#tag/Account-and-Transactions">API Reference</a> for full functionality.</p>

<p>Before starting the tutorial, ensure that you have registered your application with the <code>accounts</code> scope.  </p>
<h4 id='tutorials-tutorials-get-account-and-transaction-information-1-generating-client-credentials-token'><a href='#tutorials-tutorials-get-account-and-transaction-information-1-generating-client-credentials-token' class='header-link'><i></i></a>1. Generating client credentials token</h4><blockquote>
      <div><p>Get access token</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -k --cert transport.pem --key server.key <span class="se">\</span>
--location --request POST <span class="s1">'https://sandbox-oba-auth.revolut.com/token'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'grant_type=client_credentials'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'scope=accounts'</span>
</code></pre><pre class="highlight shell tab-shell--production"><code>curl --cert transport.pem --key server.key <span class="se">\</span>
--location --request POST <span class="s1">'https://oba-auth.revolut.com/token'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'grant_type=client_credentials'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'scope=accounts'</span>
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"eyJhbGciOiJQUzI1NiJ9.eyJjbGllbnRJZCI6IjFlYzFkYjJkLTNlNWItNGQ4Mi1iNDJlLTA2Nzk0NTYyZTIwZSIsInNjb3BlcyI6WyJhY2NvdW50cyJdLCJleHAiOjE2MDQ5MzAzOTh9.pMMtYxYh8_M8P0v9_yfJ29iq3h2x_1RT6BLJPbrJ6SSsai_fQmMNGWXtDapPCSvWtn-ol0aN8Pl725uSSJqWHFxdh0PwvKP1762s5jy7xcLTkb8tgg-AoTPm87-vsnHnw5z63yiDW1Migdx7vDN_jRe3WUSfE-u0Qv7W3SLVo8kB5-qxn2VHZTBSaBr5XReINBHJgh7Xi9LzqxqUh0yCiZSSRnu8o7-I_Q1K0jPK1D7ve7BxlkOb5fSR59CbtzfkZpI6jKDOWSqU_5mftqRRylle382nfS6AeY2eubdH6OS-lJRFcwsYplauE-tZ__54G4LTjPhUWQezvewCc5gq2Q"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="mi">2399</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The first step is to request an access token using the <code>/token</code> endpoint and <code>client_credentials</code> grant type. </p>

<p>This token will allow you to update your application using the <a href="#identification-and-authentication-identification-and-authentication-dynamic-client-registration-certificate-dn-for-using-in-registration-request"> update endpoint</a>
and create a consent in the next step. </p>
<h4 id='tutorials-tutorials-get-account-and-transaction-information-2-creating-consent'><a href='#tutorials-tutorials-get-account-and-transaction-information-2-creating-consent' class='header-link'><i></i></a>2. Creating consent</h4><blockquote>
      <div><p>Create consent</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl --location --request POST <span class="s1">'https://sandbox-oba.revolut.com/account-access-consents'</span> <span class="se">\</span>
--header <span class="s1">'x-fapi-financial-id: 001580000103UAvAAM'</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer eyJhbGciOiJQUzI1NiJ9.eyJjbGllbnRJZCI6IjFlYzFkYjJkLTNlNWItNGQ4Mi1iNDJlLTA2Nzk0NTYyZTIwZSIsInNjb3BlcyI6WyJhY2NvdW50cyJdLCJleHAiOjE2MDQ5MzAzOTh9.pMMtYxYh8_M8P0v9_yfJ29iq3h2x_1RT6BLJPbrJ6SSsai_fQmMNGWXtDapPCSvWtn-ol0aN8Pl725uSSJqWHFxdh0PwvKP1762s5jy7xcLTkb8tgg-AoTPm87-vsnHnw5z63yiDW1Migdx7vDN_jRe3WUSfE-u0Qv7W3SLVo8kB5-qxn2VHZTBSaBr5XReINBHJgh7Xi9LzqxqUh0yCiZSSRnu8o7-I_Q1K0jPK1D7ve7BxlkOb5fSR59CbtzfkZpI6jKDOWSqU_5mftqRRylle382nfS6AeY2eubdH6OS-lJRFcwsYplauE-tZ__54G4LTjPhUWQezvewCc5gq2Q'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
--data-raw <span class="s1">'
{
    "Data": {
        "Permissions": [
            "ReadAccountsBasic",
            "ReadAccountsDetail"
        ],
        "ExpirationDateTime": "2020-12-02T00:00:00+00:00",
        "TransactionFromDateTime": "2020-09-03T00:00:00+00:00",
        "TransactionToDateTime": "2020-12-03T00:00:00+00:00"
    },
    "Risk": {}
}'</span>
</code></pre><pre class="highlight shell tab-shell--production"><code>curl --location --request POST <span class="s1">'https://oba.revolut.com/account-access-consents'</span> <span class="se">\</span>
--header <span class="s1">'x-fapi-financial-id: 001580000103UAvAAM'</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer eyJhbGciOiJQUzI1NiJ9.eyJjbGllbnRJZCI6IjFlYzFkYjJkLTNlNWItNGQ4Mi1iNDJlLTA2Nzk0NTYyZTIwZSIsInNjb3BlcyI6WyJhY2NvdW50cyJdLCJleHAiOjE2MDQ5MzAzOTh9.pMMtYxYh8_M8P0v9_yfJ29iq3h2x_1RT6BLJPbrJ6SSsai_fQmMNGWXtDapPCSvWtn-ol0aN8Pl725uSSJqWHFxdh0PwvKP1762s5jy7xcLTkb8tgg-AoTPm87-vsnHnw5z63yiDW1Migdx7vDN_jRe3WUSfE-u0Qv7W3SLVo8kB5-qxn2VHZTBSaBr5XReINBHJgh7Xi9LzqxqUh0yCiZSSRnu8o7-I_Q1K0jPK1D7ve7BxlkOb5fSR59CbtzfkZpI6jKDOWSqU_5mftqRRylle382nfS6AeY2eubdH6OS-lJRFcwsYplauE-tZ__54G4LTjPhUWQezvewCc5gq2Q'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
--data-raw <span class="s1">'
{
    "Data": {
        "Permissions": [
            "ReadAccountsBasic",
            "ReadAccountsDetail"
        ],
        "ExpirationDateTime": "2020-12-02T00:00:00+00:00",
        "TransactionFromDateTime": "2020-09-03T00:00:00+00:00",
        "TransactionToDateTime": "2020-12-03T00:00:00+00:00"
    },
    "Risk": {}
}'</span>
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AwaitingAuthorisation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"StatusUpdateDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-05T16:07:46.506182Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"CreationDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-05T16:07:46.506182Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"TransactionToDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-12-03T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ExpirationDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-02T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Permissions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ReadAccountsBasic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ReadAccountsDetail"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"ConsentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d19ec758-22fd-4f34-9ad4-7437f8628987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"TransactionFromDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-03T00:00:00+00:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Risk"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"Links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://oba.revolut.com/account-access-consents"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"TotalPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Create a consent for specific permissions using the <code>consent</code> endpoint.  </p>

<p>The example to the right is creating a consent for two permissions <code>ReadAccountBasic</code> and <code>ReadAccountsDetail</code>. To see the full set of permissions supported, please see the <a href="https://developer.revolut.com/api-reference/open-banking/#operation/CreateAccountAccessConsents">API reference</a>.</p>
<h4 id='tutorials-tutorials-get-account-and-transaction-information-3-create-a-jwt-url-parameter'><a href='#tutorials-tutorials-get-account-and-transaction-information-3-create-a-jwt-url-parameter' class='header-link'><i></i></a>3. Create a JWT URL parameter</h4>
<p>Now that you have created a consent, you need the user to authorise it so that you can use Revolut&#39;s APIs to access data on their behalf.</p>
<blockquote>
      <div><p>Header </p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS256"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NYFYY-XV88A1NN6KBIRWLmATd18"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><blockquote>
      <div><p>Body</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"response_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code id_token"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;insert</span><span class="w"> </span><span class="err">client_id&gt;</span><span class="p">,</span><span class="w">
  </span><span class="s2">"redirect_uri"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;insert</span><span class="w"> </span><span class="err">redirect_uri&gt;</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accounts"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"claims"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"openbanking_intent_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;insert</span><span class="w"> </span><span class="err">ConsentId&gt;</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Firstly, create a JWT request parameter with header and body in the format to the right, signed by your signing certificate’s private key. This signature will be validated using the JWKs endpoint you specified during registration of your app.</p>

<p><strong>Note:</strong>  <code>client_id</code> ,  <code>redirect_uri</code> , <code>kid</code> and <code>scope</code> should correspond to the values for your specific application and consent request. <code>openbanking_intent_id</code> is the <code>ConsentId</code> field generated from the previous step. </p>
<h4 id='tutorials-tutorials-get-account-and-transaction-information-4-get-consent-from-user'><a href='#tutorials-tutorials-get-account-and-transaction-information-4-get-consent-from-user' class='header-link'><i></i></a>4. Get consent from user</h4><blockquote>
      <div><p>Sample URL</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>https://sandbox-oba.revolut.com/ui/index.html?response_type<span class="o">=</span>code%26id_token&amp;scope<span class="o">=</span>accounts&amp;redirect_uri<span class="o">=</span>&lt;insert redirect URL&gt;&amp;client_id<span class="o">=</span>&lt;insert client_id&gt;&amp;request<span class="o">=</span>&lt;insert JWT&gt;
</code></pre><pre class="highlight shell tab-shell--production"><code>https://oba.revolut.com/ui/index.html?response_type<span class="o">=</span>code%26id_token&amp;scope<span class="o">=</span>accounts&amp;redirect_uri<span class="o">=</span>&lt;insert redirect URL&gt;&amp;client_id<span class="o">=</span>&lt;insert client_id&gt;&amp;request<span class="o">=</span>&lt;insert JWT&gt;

</code></pre>
<p>Next, redirect the user to <code>https://oba.revolut.com/ui/index.html</code> with the parameters on the URL as detailed below. </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>Always set to   <code>code&amp;id_token</code></td>
<td>yes</td>
</tr>
<tr>
<td>client_id</td>
<td><code>client_id</code> for your application</td>
<td>yes</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>One of the redirect URI&#39;s you defined during client creation</td>
<td>yes</td>
</tr>
<tr>
<td>scope</td>
<td>The scope you are requesting eg <code>accounts</code> or <code>payments</code></td>
<td>yes</td>
</tr>
<tr>
<td>request</td>
<td>The encoded JWT generated in previous step</td>
<td>yes</td>
</tr>
</tbody></table>
<blockquote>
      <div><p>Sample redirect after successful response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight plaintext"><code>https://www.revolut_redirect.com/?code=oa_sand_sPoyVs-oMhyR36j5N-ZEVLfK9rQWPNssgIQqsOFZQ-c&amp;id_token=eyJraWQiOiJxRlFQaTRPVkJVLVNaVk5iMjJ5VjVHQVZDN1UiLCJhbGciOiJQUzI1NiJ9.eyJpc3MiOiJodHRwczovL29iYS5yZXZvbHV0LmNvZGVzIiwiaWF0IjoxNjA0OTM2ODUzLCJzdWIiOiI0NjdiYzg3MC1jOTllLTQ0MzQtYTk1OS1iOGM1NmVlNmEwMjciLCJhY3IiOiJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2EiLCJvcGVuYmFua2luZ19pbnRlbnRfaWQiOiI0NjdiYzg3MC1jOTllLTQ0MzQtYTk1OS1iOGM1NmVlNmEwMjciLCJhdWQiOiIxZWMxZGIyZC0zZTViLTRkODItYjQyZS0wNjc5NDU2MmUyMGUiLCJub25jZSI6Im4tMFM2X1d6QTJNaiIsImV4cCI6MTYwNDkzNzQ1MywiY19oYXNoIjoiTXNfRnRwdWs0U2VDNW4zdUNMTTc0ZyIsInNfaGFzaCI6IlM2YVhOY3BUZGw3V3B3bnR0V3h1b2cifQ.m-EvhggqLg7ZXh0we_PLKNsc248p8Bn_o5nj7_6CQHkiRI23ZrYjJLlz_1BhvZ_iY1Tll2gybq_0eSKRgHpvOPnhvCbcSAyfkE8YERZoVkIe-64cyiomhaqBzMzjQyghaL4KrnKH667wR1gTjVhwyJyztalTKidoLZ5OFVWRSHkqW3YLm-_q51wP0k7HHvJ-fnkGcIoCv2TYXpb9xykvgGRJv9KIISbQtM_bLBpo5Q6Q1fxNc-LK2iT-o22xQzLhzvGHtXLTl7Kn5xYf8quDjA5zG0iCAGLJ-Fo9NuTobcKjJOaNYpQ_Y2ilKMmtXqRdgAF_in4Lydt2dn9duxFvJA&amp;state=state
</code></pre>
<p>On successful completion of the authorisation flow, you will receive an authorisation code as a URL parameter in the redirect. See example to the right for how this looks.</p>

<p>This <code>code</code> is only valid for two minutes. </p>
<h4 id='tutorials-tutorials-get-account-and-transaction-information-5-exchanging-request-token-for-access-token'><a href='#tutorials-tutorials-get-account-and-transaction-information-5-exchanging-request-token-for-access-token' class='header-link'><i></i></a>5. Exchanging request token for access token</h4><blockquote>
      <div><p>Exchange Token </p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -k --key private.key --cert transport.pem <span class="se">\</span>
--location --request POST <span class="s1">'https://sandbox-oba-auth.revolut.com/token'</span> <span class="se">\ </span>
--header <span class="s1">'Content-Type:application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-encoded <span class="nv">grant_type</span><span class="o">=</span>authorization_code <span class="se">\</span>
--data-encoded <span class="nv">code</span><span class="o">=</span>&lt;insert auth_code&gt;
</code></pre><pre class="highlight shell tab-shell--production"><code>curl  --key private.key --cert transport.pem <span class="se">\</span>
--location --request POST <span class="s1">'https://oba-auth.revolut.com/token'</span> <span class="se">\ </span>
--header <span class="s1">'Content-Type:application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-encoded <span class="nv">grant_type</span><span class="o">=</span>authorization_code <span class="se">\</span>
--data-encoded <span class="nv">code</span><span class="o">=</span>&lt;insert auth_code&gt;
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"oa_sand_tP1Nofi1ixsRfBmVBtVPdIVN0J5x91imqmheQIWTS5s"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="mi">7775999</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_token"</span><span class="p">:</span><span class="s2">"eyJraWQiOiJxRlFQaTRPVkJVLVNaVk5iMjJ5VjVHQVZDN1UiLCJhbGciOiJQUzI1NiJ9.eyJpc3MiOiJodHRwczovL29iYS5yZXZvbHV0LmNvZGVzIiwic3ViIjoiNDY3YmM4NzAtYzk5ZS00NDM0LWE5NTktYjhjNTZlZTZhMDI3IiwiYXVkIjoiMWVjMWRiMmQtM2U1Yi00ZDgyLWI0MmUtMDY3OTQ1NjJlMjBlIiwibm9uY2UiOiJuLTBTNl9XekEyTWoiLCJleHAiOjE2MDQ5Mzc0Nzk1NjksImlhdCI6MTYwNDkzNjg3OX0.NrcI6qSwmkTC4zhVP7S9Se1RD8Mnwfz5D3RyGp_5CI7MN6-GLqGHnIBNPNzbUBjlmer8ecCvhm0j9tkScT0xDMSZUdMjRyvb7qrsXYTVbj0ogDPthZSe-45tiq3y4oOsIusIwMPFWGHzI2zq_wzxYY8h6QXFIK6TB_oC93jM6J5JEUUQwvDR23ntcCoH_9uNaGM2PXO2ppxhxZiJe92TYcoZFCIMxqrcVxuUYM1VLQ8d7TcpoIDWdOmtOVqDYmblUHyjFpO3IcBHalua0LRGmU3ZuaEv2iG3YzpqV0OMIHFUe9fQ95z_jID4rGIWwxRL6URIdzw6ZSSyxRXKRWNh3g"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If the user has successfully authorised your consent, return to the <code>/token</code> endpoint, this time with <code>grant_type=authorization_code</code>to obtain the access token that can be used against our Accounts APIs.</p>

<p><strong>Note:</strong> <code>auth_code</code> here is the authorisation code generated from the previous step</p>
<h4 id='tutorials-tutorials-get-account-and-transaction-information-6-get-list-of-accounts'><a href='#tutorials-tutorials-get-account-and-transaction-information-6-get-list-of-accounts' class='header-link'><i></i></a>6. Get list of Accounts</h4><blockquote>
      <div><p>Get list of accounts</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -X GET https://sandbox-oba.revolut.com/accounts <span class="se">\ </span>
--header <span class="s1">'Authorization: Bearer &lt;insert access_token&gt;'</span> <span class="se">\</span>
--header <span class="s1">'x-fapi-financial-id: 001580000103UAvAAM'</span>
</code></pre><pre class="highlight shell tab-shell--production"><code>curl -X GET https://oba.revolut.com/accounts <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer &lt;insert access_token&gt;'</span> <span class="se">\</span>
--header <span class="s1">'x-fapi-financial-id: 001580000103UAvAAM'</span>
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Account"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"AccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A1086696-D134-472D-B83E-A3F4D201C058"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"AccountType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Personal"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"AccountSubType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CurrentAccount"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bills"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Account"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"SchemeName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UK.OBIE.SortCodeAccountNumber"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80200110203345"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mr Kevin"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"SecondaryIdentification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00021"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://oba.revolut.com/accounts/"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"TotalPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Now that you have generated your final access token, you can start making requests to the API. Make a call to the <code>/accounts</code> endpoint to retrieve a list of the customer&#39;s accounts. </p>

<p>Congratulations! You have successfully made your first API request to one of our Accounts and Transactions endpoints. </p>

<p><strong>What’s next</strong></p>

<ul>
<li>See the <a href="https://developer.revolut.com/api-reference/open-banking/#tag/Account-and-Transactions" target="_blank">API Reference</a> for full detail on different permissions and endpoints that sit in &quot;Accounts and Transactions&quot;</li>
<li><a href=#tutorials-initiate-your-first-payment>Initiate your first payment:</a> see our tutorial for building to our payments endpoints</li>
</ul>
<h3 id='tutorials-initiate-your-first-payment'><a href='#tutorials-initiate-your-first-payment' class='header-link'><i></i></a>Initiate your first payment</h3>
<p>This tutorial will get you started with building integrations to our Payments endpoints.</p>

<p>In this example, you will initiate a <code>domestic-payment</code> but the principles used apply to all of our Payments endpoints. See the <a href="https://developer.revolut.com/api-reference/open-banking/#tag/Payment-Initiation">API Reference</a> for the different types of payments supported.</p>

<p>Before starting the tutorial, ensure that you have registered your application with the <code>payments</code> scope.</p>

<p>In addition your <code>jwks_url</code> specified during registration must have an <code>x5c</code> claim specified. This is equivalent to your signing key in <code>.pem</code> format. </p>
<h4 id='tutorials-tutorials-initiate-your-first-payment-1-generating-client-credentials-token'><a href='#tutorials-tutorials-initiate-your-first-payment-1-generating-client-credentials-token' class='header-link'><i></i></a>1. Generating client credentials token</h4><blockquote>
      <div><p>Get access token</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -k --cert transport.pem --key server.key <span class="se">\</span>
--location --request POST <span class="s1">'https://sandbox-oba-auth.revolut.com/token'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'grant_type=client_credentials'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'scope=payments'</span>
</code></pre><pre class="highlight shell tab-shell--production"><code>curl --cert transport.pem --key server.key <span class="se">\</span>
--location --request POST <span class="s1">'https://oba-auth.revolut.com/token'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'grant_type=client_credentials'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'scope=payments'</span>
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"eyJhbGciOiJQUzI1NiJ9.eyJjbGllbnRJZCI6IjFlYzFkYjJkLTNlNWItNGQ4Mi1iNDJlLTA2Nzk0NTYyZTIwZSIsInNjb3BlcyI6WyJhY2NvdW50cyJdLCJleHAiOjE2MDQ5MzAzOTh9.pMMtYxYh8_M8P0v9_yfJ29iq3h2x_1RT6BLJPbrJ6SSsai_fQmMNGWXtDapPCSvWtn-ol0aN8Pl725uSSJqWHFxdh0PwvKP1762s5jy7xcLTkb8tgg-AoTPm87-vsnHnw5z63yiDW1Migdx7vDN_jRe3WUSfE-u0Qv7W3SLVo8kB5-qxn2VHZTBSaBr5XReINBHJgh7Xi9LzqxqUh0yCiZSSRnu8o7-I_Q1K0jPK1D7ve7BxlkOb5fSR59CbtzfkZpI6jKDOWSqU_5mftqRRylle382nfS6AeY2eubdH6OS-lJRFcwsYplauE-tZ__54G4LTjPhUWQezvewCc5gq2Q"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="mi">2399</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The first step in this guide is to request an access token using the <code>/token</code> endpoint and <code>client_credentials</code> grant type. </p>

<p>This token will allow you to update your application using the <a href="#identification-and-authentication-identification-and-authentication-dynamic-client-registration-certificate-dn-for-using-in-registration-request">update endpoint</a>
and create a payment consent in the next step. </p>
<h4 id='tutorials-tutorials-initiate-your-first-payment-2-creating-a-domestic-payment-consent'><a href='#tutorials-tutorials-initiate-your-first-payment-2-creating-a-domestic-payment-consent' class='header-link'><i></i></a>2. Creating a domestic payment consent</h4><blockquote>
      <div><p>Create consent</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl --location --request POST <span class="s1">'https://sandbox-oba.revolut.com/domestic-payment-consents'</span> <span class="se">\</span>
--header <span class="s1">'x-fapi-financial-id: 001580000103UAvAAM'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
--header <span class="s1">'x-idempotency-key: 123'</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer &lt;insert client_credentials token&gt;'</span> <span class="se">\</span>
--header <span class="s1">'x-jws-signature: &lt;insert jws signature&gt;'</span> <span class="se">\</span>
--data <span class="s1">'
{
  "Data": {
    "Initiation": {
      "InstructionIdentification": "ID412",
      "EndToEndIdentification": "E2E123",
      "InstructedAmount": {
        "Amount": "55.00",
        "Currency": "GBP"
      },
      "CreditorAccount": {
        "SchemeName": "UK.OBIE.SortCodeAccountNumber",
        "Identification": "11223321325698",
        "Name": "Receiver Co."
      },
      "RemittanceInformation": {
        "Reference": "ReceiverRef",
        "Unstructured": "Shipment fee"
      }
    }
  },
  "Risk": {
    "PaymentContextCode": "EcommerceGoods",
    "MerchantCategoryCode": "5967",
    "MerchantCustomerIdentification": "1238808123123",
    "DeliveryAddress": {
      "AddressLine": ["7"],
      "StreetName": "Apple Street",
      "BuildingNumber": "1",
      "PostCode": "E2 7AA",
      "TownName": "London",
      "Country": "UK"
    }
  }
}'</span>
</code></pre><pre class="highlight shell tab-shell--production"><code>curl --location --request POST <span class="s1">'https://oba.revolut.com/domestic-payment-consents'</span> <span class="se">\</span>
--header <span class="s1">'x-fapi-financial-id: 001580000103UAvAAM'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
--header <span class="s1">'x-idempotency-key: 123'</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer &lt;insert client_credentials token&gt;'</span> <span class="se">\</span>
--header <span class="s1">'x-jws-signature: &lt;insert jws signature&gt;'</span> <span class="se">\</span>
--data <span class="s1">'
{
  "Data": {
    "Initiation": {
      "InstructionIdentification": "ID412",
      "EndToEndIdentification": "E2E123",
      "InstructedAmount": {
        "Amount": "55.00",
        "Currency": "GBP"
      },
      "CreditorAccount": {
        "SchemeName": "UK.OBIE.SortCodeAccountNumber",
        "Identification": "11223321325698",
        "Name": "Receiver Co."
      },
      "RemittanceInformation": {
        "Reference": "ReceiverRef",
        "Unstructured": "Shipment fee"
      }
    }
  },
  "Risk": {
    "PaymentContextCode": "EcommerceGoods",
    "MerchantCategoryCode": "5967",
    "MerchantCustomerIdentification": "1238808123123",
    "DeliveryAddress": {
      "AddressLine": ["7"],
      "StreetName": "Apple Street",
      "BuildingNumber": "1",
      "PostCode": "E2 7AA",
      "TownName": "London",
      "Country": "UK"
    }
  }
}
</span></code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AwaitingAuthorisation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"StatusUpdateDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-20T08:35:53.523806Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"CreationDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-20T08:35:53.523806Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ConsentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6686e444-c103-4077-8085-8e094200c425"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Initiation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"InstructionIdentification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID412"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"EndToEndIdentification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E2E123"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"InstructedAmount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"CreditorAccount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"SchemeName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UK.OBIE.SortCodeAccountNumber"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11223321325698"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReceiverCo."</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"RemittanceInformation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReceiverRef"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Unstructured"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shipmentfee"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Risk"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"PaymentContextCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EcommerceGoods"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"MerchantCategoryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5967"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"MerchantCustomerIdentification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1238808123123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"DeliveryAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"AddressLine"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"7"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"StreetName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AppleStreet"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"BuildingNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"PostCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E27AA"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"TownName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"London"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UK"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://oba.revolut.com/domestic-payment-consents/6686e444-c103-4077-8085-8e094200c425"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"TotalPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Create a consent to initiate a domestic payment on behalf of a Revolut customer. </p>

<p>Use your <code>client_credentials</code> token from the previous step for the Authorization field. </p>

<p>As part of the API requirement you must pass <code>x-jws-signature header</code> in your request. The signature must be generated from the request body with the TPP signing key that is specified in the JWS header. As specified in the OBIE documentation, you must only pass head and signature in <jws_head>..<jws_signature> format.</p>

<p><code>x-idempotency-key</code>  is a field specified by you in the case that there is a network failure and you do not receive the ID in response. It allows you to retry the request if needed.</p>
<h4 id='tutorials-tutorials-initiate-your-first-payment-3-create-a-jwt-url-parameter'><a href='#tutorials-tutorials-initiate-your-first-payment-3-create-a-jwt-url-parameter' class='header-link'><i></i></a>3. Create a JWT URL parameter</h4>
<p>Now that you have created a consent, you need the user to authorise it so that you can initiate a payment on behalf of the user.</p>
<blockquote>
      <div><p>Header </p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS256"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NYFYY-XV88A1NN6KBIRWLmATd18"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><blockquote>
      <div><p>Body</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"response_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code id_token"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;insert</span><span class="w"> </span><span class="err">client_id&gt;</span><span class="p">,</span><span class="w">
  </span><span class="s2">"redirect_uri"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;insert</span><span class="w"> </span><span class="err">redirect_uri&gt;</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payments"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"claims"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"openbanking_intent_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;insert</span><span class="w"> </span><span class="err">ConsentId&gt;</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Firstly, create a JWT request parameter with header and body in the format to the right, signed by your signing certificate’s private key. This signature will be validated using the JWKs endpoint you specified during registration of your app.</p>

<p><strong>Note:</strong>  <code>client_id</code> ,  <code>redirect_uri</code> , <code>kid</code> and <code>scope</code> should correspond to the values for your specific application and consent request. <code>openbanking_intent_id</code> is the <code>ConsentId</code> field generated from the previous step. </p>
<h4 id='tutorials-tutorials-initiate-your-first-payment-4-get-consent-from-user'><a href='#tutorials-tutorials-initiate-your-first-payment-4-get-consent-from-user' class='header-link'><i></i></a>4. Get consent from user</h4><blockquote>
      <div><p>Sample URL</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>https://sandbox-oba.revolut.com/ui/index.html?response_type<span class="o">=</span>code%26id_token&amp;scope<span class="o">=</span>payments&amp;redirect_uri<span class="o">=</span>&lt;insert redirect URL&gt;&amp;client_id<span class="o">=</span>&lt;insert client_id&gt;&amp;request<span class="o">=</span>&lt;insert JWT&gt;
</code></pre><pre class="highlight shell tab-shell--production"><code>https://oba.revolut.com/ui/index.html?response_type<span class="o">=</span>code%26id_token&amp;scope<span class="o">=</span>accounts&amp;redirect_uri<span class="o">=</span>&lt;insert redirect URL&gt;&amp;client_id<span class="o">=</span>&lt;insert client_id&gt;&amp;request<span class="o">=</span>&lt;insert JWT&gt;

</code></pre>
<p>Next, redirect the user to <code>https://oba.revolut.com/ui/index.html</code> with the parameters on the URL as detailed below. </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>Always set to   <code>code&amp;id_token</code></td>
<td>yes</td>
</tr>
<tr>
<td>client_id</td>
<td><code>client_id</code> for your application</td>
<td>yes</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>One of the redirect URI&#39;s you defined during client creation</td>
<td>yes</td>
</tr>
<tr>
<td>scope</td>
<td>The scope you are requesting eg <code>accounts</code> or <code>payments</code></td>
<td>yes</td>
</tr>
<tr>
<td>request</td>
<td>The encoded JWT generated in previous step</td>
<td>yes</td>
</tr>
</tbody></table>
<blockquote>
      <div><p>Sample redirect after successful response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight plaintext"><code>https://www.revolut_redirect.com/?code=oa_sand_sPoyVs-oMhyR36j5N-ZEVLfK9rQWPNssgIQqsOFZQ-c&amp;id_token=eyJraWQiOiJxRlFQaTRPVkJVLVNaVk5iMjJ5VjVHQVZDN1UiLCJhbGciOiJQUzI1NiJ9.eyJpc3MiOiJodHRwczovL29iYS5yZXZvbHV0LmNvZGVzIiwiaWF0IjoxNjA0OTM2ODUzLCJzdWIiOiI0NjdiYzg3MC1jOTllLTQ0MzQtYTk1OS1iOGM1NmVlNmEwMjciLCJhY3IiOiJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2EiLCJvcGVuYmFua2luZ19pbnRlbnRfaWQiOiI0NjdiYzg3MC1jOTllLTQ0MzQtYTk1OS1iOGM1NmVlNmEwMjciLCJhdWQiOiIxZWMxZGIyZC0zZTViLTRkODItYjQyZS0wNjc5NDU2MmUyMGUiLCJub25jZSI6Im4tMFM2X1d6QTJNaiIsImV4cCI6MTYwNDkzNzQ1MywiY19oYXNoIjoiTXNfRnRwdWs0U2VDNW4zdUNMTTc0ZyIsInNfaGFzaCI6IlM2YVhOY3BUZGw3V3B3bnR0V3h1b2cifQ.m-EvhggqLg7ZXh0we_PLKNsc248p8Bn_o5nj7_6CQHkiRI23ZrYjJLlz_1BhvZ_iY1Tll2gybq_0eSKRgHpvOPnhvCbcSAyfkE8YERZoVkIe-64cyiomhaqBzMzjQyghaL4KrnKH667wR1gTjVhwyJyztalTKidoLZ5OFVWRSHkqW3YLm-_q51wP0k7HHvJ-fnkGcIoCv2TYXpb9xykvgGRJv9KIISbQtM_bLBpo5Q6Q1fxNc-LK2iT-o22xQzLhzvGHtXLTl7Kn5xYf8quDjA5zG0iCAGLJ-Fo9NuTobcKjJOaNYpQ_Y2ilKMmtXqRdgAF_in4Lydt2dn9duxFvJA&amp;state=state
</code></pre>
<p>On successful completion of the authorisation flow, you will receive an authorisation code as a URL parameter in the redirect. See example to the right for how this looks.</p>

<p>This <code>authorisation code</code> is only valid for two minutes. </p>
<h4 id='tutorials-tutorials-initiate-your-first-payment-5-exchanging-request-token-for-access-token'><a href='#tutorials-tutorials-initiate-your-first-payment-5-exchanging-request-token-for-access-token' class='header-link'><i></i></a>5. Exchanging request token for access token</h4><blockquote>
      <div><p>Exchange Token </p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -k --key private.key --cert transport.pem <span class="se">\</span>
--location --request POST <span class="s1">'https://sandbox-oba-auth.revolut.com/token'</span> <span class="se">\ </span>
--header <span class="s1">'Content-Type:application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-encoded <span class="nv">grant_type</span><span class="o">=</span>authorization_code <span class="se">\</span>
--data-encoded <span class="nv">code</span><span class="o">=</span>&lt;insert auth_code&gt;
</code></pre><pre class="highlight shell tab-shell--production"><code>curl  --key private.key --cert transport.pem <span class="se">\</span>
--location --request POST <span class="s1">'https://oba-auth.revolut.com/token'</span> <span class="se">\ </span>
--header <span class="s1">'Content-Type:application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-encoded <span class="nv">grant_type</span><span class="o">=</span>authorization_code <span class="se">\</span>
--data-encoded <span class="nv">code</span><span class="o">=</span>&lt;insert auth_code&gt;
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"oa_sand_tP1Nofi1ixsRfBmVBtVPdIVN0J5x91imqmheQIWTS5s"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="mi">7775999</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_token"</span><span class="p">:</span><span class="s2">"eyJraWQiOiJxRlFQaTRPVkJVLVNaVk5iMjJ5VjVHQVZDN1UiLCJhbGciOiJQUzI1NiJ9.eyJpc3MiOiJodHRwczovL29iYS5yZXZvbHV0LmNvZGVzIiwic3ViIjoiNDY3YmM4NzAtYzk5ZS00NDM0LWE5NTktYjhjNTZlZTZhMDI3IiwiYXVkIjoiMWVjMWRiMmQtM2U1Yi00ZDgyLWI0MmUtMDY3OTQ1NjJlMjBlIiwibm9uY2UiOiJuLTBTNl9XekEyTWoiLCJleHAiOjE2MDQ5Mzc0Nzk1NjksImlhdCI6MTYwNDkzNjg3OX0.NrcI6qSwmkTC4zhVP7S9Se1RD8Mnwfz5D3RyGp_5CI7MN6-GLqGHnIBNPNzbUBjlmer8ecCvhm0j9tkScT0xDMSZUdMjRyvb7qrsXYTVbj0ogDPthZSe-45tiq3y4oOsIusIwMPFWGHzI2zq_wzxYY8h6QXFIK6TB_oC93jM6J5JEUUQwvDR23ntcCoH_9uNaGM2PXO2ppxhxZiJe92TYcoZFCIMxqrcVxuUYM1VLQ8d7TcpoIDWdOmtOVqDYmblUHyjFpO3IcBHalua0LRGmU3ZuaEv2iG3YzpqV0OMIHFUe9fQ95z_jID4rGIWwxRL6URIdzw6ZSSyxRXKRWNh3g"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If the user has successfully authorised your consent, return to the <code>/token</code> endpoint, this time with <code>grant_type=authorization_code</code>to obtain the access token that can be used against the  <code>/domestic-payments</code> endpoint. </p>

<p><strong>Note:</strong> <code>auth_code</code> here is the authorisation code generated from the previous step</p>
<h4 id='tutorials-tutorials-initiate-your-first-payment-6-initiate-domestic-payment'><a href='#tutorials-tutorials-initiate-your-first-payment-6-initiate-domestic-payment' class='header-link'><i></i></a>6. Initiate domestic payment</h4><blockquote>
      <div><p>Create a domestic payment</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl --location --request POST <span class="s1">'https://sandbox-oba.revolut.com/domestic-payments'</span> <span class="se">\</span>
--header <span class="s1">'x-fapi-financial-id: 001580000103UAvAAM'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
--header <span class="s1">'x-idempotency-key: 123'</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer &lt;insert acces_token&gt;'</span> <span class="se">\</span>
--header <span class="s1">'x-jws-signature: &lt;insert jws signature&gt;'</span> <span class="se">\</span>
--data <span class="s1">'
{
  "Data": {
    "ConsentId":&lt;insert consent_id&gt;
    "Initiation": {
      "InstructionIdentification": "ID412",
      "EndToEndIdentification": "E2E123",
      "InstructedAmount": {
        "Amount": "55.00",
        "Currency": "GBP"
      },
      "CreditorAccount": {
        "SchemeName": "UK.OBIE.SortCodeAccountNumber",
        "Identification": "11223321325698",
        "Name": "Receiver Co."
      },
      "RemittanceInformation": {
        "Reference": "ReceiverRef",
        "Unstructured": "Shipment fee"
      }
    }
  },
  "Risk": {
    "PaymentContextCode": "EcommerceGoods",
    "MerchantCategoryCode": "5967",
    "MerchantCustomerIdentification": "1238808123123",
    "DeliveryAddress": {
      "AddressLine": ["7"],
      "StreetName": "Apple Street",
      "BuildingNumber": "1",
      "PostCode": "E2 7AA",
      "TownName": "London",
      "Country": "UK"
    }
  }
}
</span></code></pre><pre class="highlight shell tab-shell--production"><code>curl --location --request POST <span class="s1">'https://oba.revolut.com/domestic-payments'</span> <span class="se">\</span>
--header <span class="s1">'x-fapi-financial-id: 001580000103UAvAAM'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
--header <span class="s1">'x-idempotency-key: 123'</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer &lt;insert acces_token&gt;'</span> <span class="se">\</span>
--header <span class="s1">'x-jws-signature: &lt;insert jws signature&gt;'</span> <span class="se">\</span>
--data <span class="s1">'
{
  "Data": {
    "ConsentId":&lt;insert consent_id&gt;
    "Initiation": {
      "InstructionIdentification": "ID412",
      "EndToEndIdentification": "E2E123",
      "InstructedAmount": {
        "Amount": "55.00",
        "Currency": "GBP"
      },
      "CreditorAccount": {
        "SchemeName": "UK.OBIE.SortCodeAccountNumber",
        "Identification": "11223321325698",
        "Name": "Receiver Co."
      },
      "RemittanceInformation": {
        "Reference": "ReceiverRef",
        "Unstructured": "Shipment fee"
      }
    }
  },
  "Risk": {
    "PaymentContextCode": "EcommerceGoods",
    "MerchantCategoryCode": "5967",
    "MerchantCustomerIdentification": "1238808123123",
    "DeliveryAddress": {
      "AddressLine": ["7"],
      "StreetName": "Apple Street",
      "BuildingNumber": "1",
      "PostCode": "E2 7AA",
      "TownName": "London",
      "Country": "UK"
    }
  }
}
</span></code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"DomesticPaymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dd817a13-3198-48ca-a5dc-f22b09ee82c0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AcceptedSettlementInProcess"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"StatusUpdateDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-20T08:54:30.115047Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"CreationDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-20T08:54:30.115047Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ConsentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6686e444-c103-4077-8085-8e094200c425"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Initiation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"CreditorAccount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReceiverCo."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"SchemeName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UK.OBIE.SortCodeAccountNumber"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11223321325698"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"InstructedAmount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"RemittanceInformation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReceiverRef"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Unstructured"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shipmentfee"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"EndToEndIdentification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E2E123"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"InstructionIdentification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID412"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://oba.revolut.com/domestic-payments/dd817a13-3198-48ca-a5dc-f22b09ee82c0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"TotalPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre>
<p>Now that you have generated your final access token, you can initiate the payment on the user&#39;s behalf. Make a call to the <code>/domestic-payments</code> endpoint to initiate the payment on their behalf.</p>

<p>As part of the API requirement you must pass <code>x-jws-signature header</code> in your request. The signature must be generated from the request body with the TPP signing key that is specified in the JWS header. As specified in the OB documentation, you must only pass head and signature in <jws_head>..<jws_signature> format.</p>

<p>Congratulations! You have successfully initiated your first payment </p>

<p><strong>What’s next</strong></p>

<ul>
<li>See the <a href="https://developer.revolut.com/api-reference/open-banking/#tag/Payment-Initiation" target="_blank">API Reference</a> for full detail on different types of payments supported by Revolut</li>
<li><a href=#tutorials-create-your-first-draft-payment>Create your first draft payment:</a> see our tutorial for building to our draft payments endpoints</li>
</ul>
<h3 id='tutorials-create-your-first-draft-payment'><a href='#tutorials-create-your-first-draft-payment' class='header-link'><i></i></a>Create your first draft payment</h3>
<p>To request approval to use our draft payments endpoint, please first register your application in our <a href='https://developer.revolut.com/portal/applications'>Developer Portal</a>.</p>

<p><strong>Note:</strong> draft payment functionality is only available for Revolut Business customers. </p>
<h4 id='tutorials-tutorials-create-your-first-draft-payment-1-get-authorisation-from-user'><a href='#tutorials-tutorials-create-your-first-draft-payment-1-get-authorisation-from-user' class='header-link'><i></i></a>1. Get authorisation from user</h4><blockquote>
      <div><p>Draft Payments authorisation URL</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>https://sandbox-business.revolut.com/partner-confirm?response_type<span class="o">=</span>code&amp;state<span class="o">=</span>state&amp;scope<span class="o">=</span>draft_payments&amp;client_id<span class="o">=</span>your_client_id&amp;redirect_uri<span class="o">=</span>your_redirect_uri
</code></pre><pre class="highlight shell tab-shell--production"><code>https://business.revolut.com/partner-confirm?response_type<span class="o">=</span>code&amp;state<span class="o">=</span>state&amp;scope<span class="o">=</span>draft_payments&amp;client_id<span class="o">=</span>your_client_id&amp;redirect_uri<span class="o">=</span>your_redirect_uri
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight plaintext"><code>https://www.revolut_redirect.com/revolut_redirect?code=oa_sand_kiLg3m7xrNua0rbShC1GQZfbk0DthUhOpVA9xX2oRY0&amp;state=state
</code></pre>
<p>Before you can start creating draft payments, you&#39;ll need to get authorisation from the user to make draft payments on their behalf. By redirecting the user to the authorisation URL, you will get authorisation in the form of an authorisation code.</p>
<h5 id='tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-1-get-authorisation-from-user-authorisation-url-parameters'><a href='#tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-1-get-authorisation-from-user-authorisation-url-parameters' class='header-link'><i></i></a>Authorisation URL Parameters</h5>
<table><thead>
<tr>
<th>Paramater</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>scope</td>
<td>Scope for authorisation that&#39;s required from the user</td>
<td>yes</td>
</tr>
<tr>
<td>client_id</td>
<td><code>client_id</code> for your application</td>
<td>yes</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>One of the redirect URI&#39;s you defined during client creation</td>
<td>yes</td>
</tr>
<tr>
<td>state</td>
<td>A generated string to verify the response is initiated by the same user</td>
<td>yes</td>
</tr>
</tbody></table>
<h4 id='tutorials-tutorials-create-your-first-draft-payment-2-exchanging-authorisation-code-for-access-token'><a href='#tutorials-tutorials-create-your-first-draft-payment-2-exchanging-authorisation-code-for-access-token' class='header-link'><i></i></a>2. Exchanging authorisation code for access token</h4><blockquote>
      <div><p>Token request via MTLS</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -k --key your_private.key --cert your_transport.pem <span class="se">\</span>
--location --request POST <span class="s1">'https://sandbox-mtls-auth.revolut.com/token'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'grant_type=authorization_code'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'code=&lt;insert authorisation_code&gt;'</span> 
</code></pre><pre class="highlight shell tab-shell--production"><code>curl  --key your_private.key --cert your_transport.pem <span class="se">\</span>
--location --request POST <span class="s1">'https://mtls-auth.revolut.com/token'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'grant_type=authorization_code'</span> <span class="se">\</span>
--data-urlencode <span class="s1">'code=&lt;insert authorisation_code&gt;'</span> 
</code></pre><blockquote>
      <div><p>MTLS response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"oa_sand_tG6kRPb2LAYJZx1c3w1NZ7ntuscssWqsC6WkaW9jbER-E"</span><span class="p">,</span><span class="s2">"token_type"</span><span class="p">:</span><span class="s2">"Bearer"</span><span class="p">,</span><span class="s2">"expires_in"</span><span class="p">:</span><span class="mi">7775999</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Next, exchange your authorisation code for an access token using the <code>https://mtls-auth.revolut.com/token</code> endpoint.</p>
<h4 id='tutorials-tutorials-create-your-first-draft-payment-3-create-draft-payment'><a href='#tutorials-tutorials-create-your-first-draft-payment-3-create-draft-payment' class='header-link'><i></i></a>3. Create Draft Payment</h4><blockquote>
      <div><p>Create Draft Payment</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl --location --request POST <span class="s1">'https://sandbox-apis.revolut.com/draft-payments'</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer &lt;insert access_token.'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: text/csv'</span> <span class="se">\</span>
--data-binary @draft_payments.csv
</code></pre><pre class="highlight shell tab-shell--production"><code>curl --location --request POST <span class="s1">'https://apis.revolut.com/draft-payments'</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer &lt;insert access_token.'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: text/csv'</span> <span class="se">\</span>
--data-binary @draft_payments.csv
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"DraftPaymentId"</span><span class="p">:</span><span class="s2">"4bc0a477-2c81-4f49-bf5b-c6705bb7a6d9"</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Now you have an access token, you can use the <code>/draft_payments</code> endpoint to create a draft payment on behalf of the customer. Please include a CSV with the below fields, columns with optional values can be omitted in the uploaded file.</p>

<p>Once created, a draft payment will appear in their Revolut Business account, which the user can then either approve or reject.</p>

<p><strong>Note:</strong> maximum number of rows in a file is 1000 and all payments must be in the same currency</p>
<h5 id='tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-3-create-draft-payment-parameters'><a href='#tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-3-create-draft-payment-parameters' class='header-link'><i></i></a>Parameters</h5>
<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>scheduledDate</td>
<td>query</td>
<td>All transfers in csv will be created as a scheduled payment with this date as the execution date</td>
<td>No</td>
<td>date in &quot;YYYY-MM-DD&quot; format</td>
</tr>
</tbody></table>
<h5 id='tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-3-create-draft-payment-csv-format'><a href='#tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-3-create-draft-payment-csv-format' class='header-link'><i></i></a>CSV Format</h5>
<table><thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Name</td>
<td>Yes</td>
<td>Can contain up to 80 characters. If INDIVIDUAL recipient type is provided this field must contain first and last name separated by white space</td>
</tr>
<tr>
<td>Recipient type</td>
<td>Yes</td>
<td>Can be either INDIVIDUAL or COMPANY</td>
</tr>
<tr>
<td>Account number</td>
<td>For UK transfers</td>
<td>Must contain valid account number if provided</td>
</tr>
<tr>
<td>Sort code or Routing number</td>
<td>For UK transfers</td>
<td>Must contain valid sort code or routing number if provided</td>
</tr>
<tr>
<td>IBAN</td>
<td>For SEPA transfers</td>
<td>Must contain valid IBAN if provided</td>
</tr>
<tr>
<td>BIC</td>
<td>For SEPA transfers</td>
<td>Must contain valid BIC if provided</td>
</tr>
<tr>
<td>Recipient bank country</td>
<td>Yes</td>
<td>Must contain valid ISO 3166-1 country code</td>
</tr>
<tr>
<td>Currency</td>
<td>Yes</td>
<td>Must contain valid ISO 4217 currency code</td>
</tr>
<tr>
<td>Amount</td>
<td>Yes</td>
<td>Must match following pattern <code>[0-9]*(\\.[0-9]*)?</code></td>
</tr>
<tr>
<td>Payment reference</td>
<td>Yes</td>
<td>Can contain up to 100 characters</td>
</tr>
<tr>
<td>Recipient country</td>
<td>No</td>
<td>Must contain valid ISO 3166-1 country code if provided</td>
</tr>
<tr>
<td>State or province</td>
<td>No</td>
<td>Can contain up to 50 characters</td>
</tr>
<tr>
<td>Address line 1</td>
<td>No</td>
<td>Can contain up to 50 characters</td>
</tr>
<tr>
<td>Address line 2</td>
<td>No</td>
<td>Can contain up to 50 characters</td>
</tr>
<tr>
<td>City</td>
<td>No</td>
<td>Can contain up to 50 characters</td>
</tr>
<tr>
<td>Postal code</td>
<td>No</td>
<td>Can contain up to 50 characters</td>
</tr>
</tbody></table>
<h4 id='tutorials-tutorials-create-your-first-draft-payment-4-get-draft-payment'><a href='#tutorials-tutorials-create-your-first-draft-payment-4-get-draft-payment' class='header-link'><i></i></a>4. Get Draft Payment</h4><blockquote>
      <div><p>Get Draft Payment Details</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight shell tab-shell--sandbox"><code>curl -X GET https://sandbox-apis.revolut.com/draft-payments/<span class="o">{</span>DraftPaymentId<span class="o">}</span> <span class="se">\</span>
--header <span class="s1">'Authorization: Bearer &lt;insert access_token&gt;'</span>
</code></pre><pre class="highlight shell tab-shell--production"><code>curl -X GET https://apis.revolut.com/draft-payments/<span class="o">{</span>DraftPaymentId<span class="o">}</span> <span class="se">\ </span>
--header <span class="s1">'Authorization: Bearer &lt;insert access_token&gt;'</span>
</code></pre><blockquote>
      <div><p>Response</p>
</div>
      <div class='env-selector'>
        <select>
          <option value="sandbox">Sandbox</option>
          <option value="production">Production</option>
        </select>
      </div>
    </blockquote><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Processed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Transfers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"InstructedAmount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"Reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User comment"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Created"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Index"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"InstructedAmount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"Reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Failed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"FailedReason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Something went wrong"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"FailedReasonCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">3067</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Index"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>By supplying a <code>DraftPaymentID</code>, you can request details related to a specific draft payment that has been created. <code>Index</code> indicates which row number from the CSV file this transfer represents. </p>
<h4 id='tutorials-tutorials-create-your-first-draft-payment-5-working-with-draft-payments'><a href='#tutorials-tutorials-create-your-first-draft-payment-5-working-with-draft-payments' class='header-link'><i></i></a>5. Working with Draft Payments</h4>
<p>Now that your first draft payment has been created, there are some important considerations to take into account when building your integration. </p>
<h5 id='tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-5-working-with-draft-payments-payment-orders-vs-transfers'><a href='#tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-5-working-with-draft-payments-payment-orders-vs-transfers' class='header-link'><i></i></a>Payment Orders vs Transfers</h5>
<p>When you create a bulk draft payment, it consists of a <i>draft payment order</i> which in turn contains a set of <i> transfers</i>, these concepts have independent states. </p>

<p>A <i>draft payment order</i> is what the user will either approve or delete from the UI. There are four states that the order can appear in:</p>

<table><thead>
<tr>
<th>Draft Payment Order Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Awaiting</td>
<td>Draft payment order has been created and awaiting approval from user</td>
</tr>
<tr>
<td>Approved</td>
<td>Draft payment order has been approved by the user and the transfers are in the process of being executed</td>
</tr>
<tr>
<td>Processed</td>
<td>Draft payment order has been processed</td>
</tr>
<tr>
<td>Deleted</td>
<td>Draft payment order has been deleted by the user</td>
</tr>
</tbody></table>

<p>Once a <i>draft payment order</i> has been approved, each <i>transfer</i> is then executed individually. There are five states that the transfer can appear in:</p>

<table><thead>
<tr>
<th>Transfer Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Created</td>
<td>Transfer has been created but is yet to be executed</td>
</tr>
<tr>
<td>Pending</td>
<td>Transfer is the queue to be executed</td>
</tr>
<tr>
<td>Completed</td>
<td>Transfer has successfully completed and a payment has been made from the users account</td>
</tr>
<tr>
<td>Failed</td>
<td>Transfer has failed and no payment has been made. Accompanying failure reason code and message are returned in <code>GET</code> endpoint.</td>
</tr>
<tr>
<td>Deleted</td>
<td>Transfer has been deleted by the user</td>
</tr>
</tbody></table>
<h5 id='tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-5-working-with-draft-payments-failure-codes'><a href='#tutorials-tutorials-create-your-first-draft-payment-tutorials-tutorials-create-your-first-draft-payment-5-working-with-draft-payments-failure-codes' class='header-link'><i></i></a>Failure Codes</h5>
<p>There are a number of different reasons that transfers can fail. Please see the table below as a reference for different values of <code>FailedReasonCode</code>:</p>

<table><thead>
<tr>
<th>Failure Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1003</td>
<td>Recipient is unable to receive funds.</td>
</tr>
<tr>
<td>1006</td>
<td>User has insufficient balance to execute the payment.</td>
</tr>
<tr>
<td>4000</td>
<td>Internal transfer error. Typically occurs when a user is trying to send a payment to a sub-account or sending to an account with the incorrect currency.</td>
</tr>
<tr>
<td>4032</td>
<td>Invalid transfer reference. The transfer reference that was detailed in the payment was invalid.</td>
</tr>
<tr>
<td>3067</td>
<td>Unknown error. Please ask user to reach out to support</td>
</tr>
</tbody></table>

<p>Each <code>FailedReasonCode</code> is accompanied by a custom <code>FailedReasonMessage</code> to give detail on the failure. </p>

<aside class="warning">
If ever in doubt, users should always reach out to Revolut Business support to get further help in understanding the failure of specific transfers. 
</aside>

<p><strong>What’s next</strong></p>

<ul>
<li>See the <a href="https://developer.revolut.com/api-reference/open-banking/#operation/createDraftPayment" target="_blank">API Reference</a> for full detail on working with draft payments</li>
<li>Suggest a new endpoint by filling out this short <a href=https://docs.google.com/forms/d/1jTvhtnCvPvVviGxAqu03vVrnfcrhzkU6KhbAuQvUuQE/edit>form</a></li>
</ul>
<h2 id='api-metrics'><a href='#api-metrics' class='header-link'><i></i></a>API Metrics</h2>
<p>You can view the latest API metrics for Mobile, Business and Open Banking APIs <a href="https://revolut-engineering.github.io/oba/reports/indexLine.html" target="_blank">here</a>.
You can also review detailed Open Banking metrics <a href="https://revolut-engineering.github.io/oba/reports/index.html" target="_blank">here</a>.</p>

<p>We update these reports daily and keep them for the last 90 days.</p>
<h2 id='usage-and-limits'><a href='#usage-and-limits' class='header-link'><i></i></a>Usage and limits</h2>
<p>In order to ensure safe and fair resource sharing, we define the following usage limits:</p>

<ul>
<li>A maximum of 100 requests per second for one application</li>
</ul>

<p>Please make sure to stay under this limit. Should you estimate this limit to be a problem for your use case of our API, please <a href="mailto:api-requests@revolut.com">reach out to us</a> directly.</p>
<h2 id='glossary'><a href='#glossary' class='header-link'><i></i></a>Glossary</h2>
<p>For the complete list of Open Banking terms, we recommend viewing the <a href="https://www.openbanking.org.uk/about-us/glossary/">official glossary</a>.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Term</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>TPP</td>
<td>Third Party Provider</td>
<td>Third Party Providers are organisations or natural persons that use APIs developed to Standards to access customer’s accounts, in order to provide account information services and/or to initiate payments.  Third Party Providers are either/both Payment Initiation Service Providers (PISPs) and/or Account Information Service Providers (AISPs).</td>
</tr>
<tr>
<td>AISP</td>
<td>Account Information Service Provider</td>
<td>An Account Information Service provides account information services as an online service to provide consolidated information on one or more payment accounts held by a payment service user with one or more payment service provider(s).</td>
</tr>
<tr>
<td>ASPSP</td>
<td>Account Servicing Payment Service Provider</td>
<td>Account Servicing Payment Service Providers provide and maintain a payment account for a payer as defined by the PSRs and, in the context of the Open Banking Ecosystem are entities that publish Read/Write APIs to permit, with customer consent, payments initiated by third party providers and/or make their customers’ account transaction data available to third party providers via their API end points.</td>
</tr>
</tbody></table>

<div class="feedback-general"><a>Want to see a term that isn't listed here? Let us know!</a></div>

<p><br/>
<br/>
<br/>
<br/></p>
<h2 id='errors'><a href='#errors' class='header-link'><i></i></a>Errors</h2>
<p>The API uses the following error codes:</p>

<table><thead>
<tr>
<th>CODE</th>
<th>MEANING</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your access token is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Access to the requested resource or action is forbidden.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The requested resource could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access an endpoint with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t JSON.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re sending too many requests.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

<div class="feedback"></div>

      </div>
    </div>
  </body>
  <script src="../javascripts/components.js" async="true"></script>
</html>
